<!DOCTYPE html><html><head>
      <title>Practica2</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
      
      
      
      
      
      <style>
      pre{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;padding:1em;margin:.5em 0;overflow:auto;line-height:1.5;tab-size:4;hyphens:none;color:#f8f8f2;background-color:#323232!important;border:#515151;border-radius:3px}pre[class*=language-]{padding:1em}code[class*=language-] .token.cdata,code[class*=language-] .token.comment,code[class*=language-] .token.doctype,code[class*=language-] .token.prolog,pre[class*=language-] .token.cdata,pre[class*=language-] .token.comment,pre[class*=language-] .token.doctype,pre[class*=language-] .token.prolog{color:#75715e}code[class*=language-] .token.punctuation,pre[class*=language-] .token.punctuation{color:inherit}code[class*=language-] .namespace,pre[class*=language-] .namespace{opacity:.7}code[class*=language-] .token.boolean,code[class*=language-] .token.constant,code[class*=language-] .token.deleted,code[class*=language-] .token.function-name,code[class*=language-] .token.number,code[class*=language-] .token.property,code[class*=language-] .token.symbol,code[class*=language-] .token.tag,pre[class*=language-] .token.boolean,pre[class*=language-] .token.constant,pre[class*=language-] .token.deleted,pre[class*=language-] .token.function-name,pre[class*=language-] .token.number,pre[class*=language-] .token.property,pre[class*=language-] .token.symbol,pre[class*=language-] .token.tag{color:#ae81ff}code[class*=language-] .token.attr-name,code[class*=language-] .token.builtin,code[class*=language-] .token.char,code[class*=language-] .token.inserted,code[class*=language-] .token.selector,code[class*=language-] .token.string,pre[class*=language-] .token.attr-name,pre[class*=language-] .token.builtin,pre[class*=language-] .token.char,pre[class*=language-] .token.inserted,pre[class*=language-] .token.selector,pre[class*=language-] .token.string{color:#e6db74}code[class*=language-] .token.entity,pre[class*=language-] .token.entity{color:#ae81ff}code[class*=language-] .token.url,pre[class*=language-] .token.url{color:#ccc}code[class*=language-] .token.operator,pre[class*=language-] .token.operator{color:#f92672}code[class*=language-] .token.atrule,code[class*=language-] .token.attr-value,code[class*=language-] .token.keyword,pre[class*=language-] .token.atrule,pre[class*=language-] .token.attr-value,pre[class*=language-] .token.keyword{color:#66d9ef}code[class*=language-] .token.function,pre[class*=language-] .token.function{color:#a6e22e}code[class*=language-] .token.class-name,pre[class*=language-] .token.class-name{color:#a6e22e}code[class*=language-] .token.regex,pre[class*=language-] .token.regex{color:#ae81ff}code[class*=language-] .token.important,code[class*=language-] .token.variable,pre[class*=language-] .token.important,pre[class*=language-] .token.variable{color:#a6e22e}code[class*=language-] .token.bold,code[class*=language-] .token.important,pre[class*=language-] .token.bold,pre[class*=language-] .token.important{font-weight:700}code[class*=language-] .token.italic,pre[class*=language-] .token.italic{font-style:italic}code[class*=language-] .token.entity,pre[class*=language-] .token.entity{cursor:help}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#f8f8f2;background-color:#282828;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#fff}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#dbdbbd}html body strong{color:#fff}html body del{color:#dbdbbd}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#dbdbbd;background-color:#3c3c3c;border-left:4px solid #515151}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#515151;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#fff}html body table td,html body table th{border:1px solid #515151;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#fff;background-color:#3c3c3c;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#515151;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#fff;border:1px solid #515151;border-bottom:2px solid #424242;padding:2px 4px;background-color:#3c3c3c;border-radius:3px}@media print{html body{background-color:#282828}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#fff;page-break-after:avoid}html body blockquote{color:#dbdbbd}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px/2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      <style>
    img {
        width: 100%;
        height:20px
    }
</style>
<h1 class="crossnote-header" id="pr%C3%A1ctica-2--sem%C3%A1foros">Práctica 2 – Semáforos</h1>

<p>CONSIDERACIONES PARA RESOLVER LOS EJERCICIOS:</p>
<ul>
<li>Los semáforos deben estar declarados en todos los ejercicios.</li>
<li>Los semáforos deben estar inicializados en todos los ejercicios.</li>
<li>No se puede utilizar ninguna sentencia para setear o ver el valor de un semáforo.</li>
<li>Debe evitarse hacer busy waiting en todos los ejercicios.</li>
<li>En todos los ejercicios el tiempo debe representarse con la función delay</li>
</ul>
<img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<ul>
<li><a href="#ejercicio-1">Ejercicio 1</a></li>
<li><a href="#ejercicio-2">Ejercicio 2</a></li>
<li><a href="#ejercicio-3">Ejercicio 3</a></li>
<li><a href="#ejercicio-4">Ejercicio 4</a></li>
<li><a href="#ejercicio-5">Ejercicio 5</a></li>
<li><a href="#ejercicio-6">Ejercicio 6</a></li>
<li><a href="#ejercicio-7">Ejercicio 7</a></li>
<li><a href="#ejercicio-8">Ejercicio 8</a></li>
<li><a href="#ejercicio-9">Ejercicio 9</a></li>
<li><a href="#ejercicio-10">Ejercicio 10</a></li>
<li><a href="#ejercicio-11">Ejercicio 11</a></li>
<li><a href="#ejercicio-12">Ejercicio 12</a></li>
</ul>
<hr>
<h3 class="crossnote-header" id="ejemplo-1">Ejemplo 1</h3>

<p>Hay C chicos y hay una bolsa con caramelos que nunca se vacía. Los chico de a UNO van sacando de a UN caramelo y lo comen. Los chicos deben llevar la cuenta de cuantos caramelos se han tomado de la bolsa.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code><span class="token keyword keyword-int">int</span> cant <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
sem mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
Process Chico<span class="token punctuation">[</span>id<span class="token operator">:</span> <span class="token number">0.</span><span class="token punctuation">.</span>C<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span> 
    <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span> 
        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">--</span> tomar caramelo
        cant <span class="token operator">=</span> cant <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token operator">--</span> comer caramelo
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><h3 class="crossnote-header" id="ejemplo-2">Ejemplo 2</h3>

<p>Hay C chicos y hay una bolsa con caramelos limitada a N caramelos. Los chico de a UNO van sacando de a UN caramelo y lo comen. Los chicos deben llevar la cuenta de cuantos caramelos se han tomado de la bolsa</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code><span class="token keyword keyword-int">int</span> cant <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
sem mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
Process Chico<span class="token punctuation">[</span>id<span class="token operator">:</span> <span class="token number">0.</span><span class="token punctuation">.</span>C<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>cant <span class="token operator">&lt;</span> N<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">--</span> tomar caramelo
        cant <span class="token operator">=</span> cant <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token operator">--</span> comer caramelo
        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h3 class="crossnote-header" id="ejemplo-3">Ejemplo 3</h3>

<p>Hay C chicos y hay una bolsa con caramelos limitada a N caramelos administrada por UNA abuela. Cuando todos los chicos han llegado llaman a la abuela, y a partir de ese momento ella N veces selecciona un chico aleatoriamente y lo deja pasar a tomar un caramelo.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code><span class="token keyword keyword-int">int</span> contador <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> bool seguir <span class="token operator">=</span> true<span class="token punctuation">;</span>
sem mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> espera_abuela <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> barrera <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> espera_chicos<span class="token punctuation">[</span>C<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>C<span class="token punctuation">]</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> listo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Chico<span class="token punctuation">[</span>id<span class="token operator">:</span> <span class="token number">0.</span><span class="token punctuation">.</span>C<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span> 
    <span class="token keyword keyword-int">int</span> i<span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    contador <span class="token operator">=</span> contador <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>contador <span class="token operator">==</span> C<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword keyword-for">for</span> i <span class="token operator">=</span> <span class="token number">1.</span><span class="token punctuation">.</span>C → <span class="token function">V</span><span class="token punctuation">(</span>barrera<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>espera_abuela<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>barrera<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>espera_chicos<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>seguir<span class="token punctuation">)</span><span class="token punctuation">{</span> 
        <span class="token operator">--</span>tomar caramelo
        <span class="token function">V</span><span class="token punctuation">(</span>listo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">--</span>comer caramelo 
        <span class="token function">P</span><span class="token punctuation">(</span>espera_chicos<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Abuela<span class="token punctuation">{</span>
    <span class="token keyword keyword-int">int</span> i<span class="token punctuation">,</span> aux<span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>espera_abuela<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-for">for</span> i <span class="token operator">=</span> <span class="token number">1.</span><span class="token punctuation">.</span>N <span class="token punctuation">{</span> 
        aux <span class="token operator">=</span> <span class="token punctuation">(</span>rand mod C<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>espera_chicos<span class="token punctuation">[</span>aux<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">P</span><span class="token punctuation">(</span>listo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    seguir <span class="token operator">=</span> false<span class="token punctuation">;</span>
    <span class="token keyword keyword-for">for</span> aux <span class="token operator">=</span> <span class="token number">0.</span><span class="token punctuation">.</span>C<span class="token operator">-</span><span class="token number">1</span> → <span class="token function">V</span><span class="token punctuation">(</span>espera_chicos<span class="token punctuation">[</span>aux<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></td>
</tr></tbody></table>
<img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<h3 class="crossnote-header" id="-ejercicio-1">✅ Ejercicio 1</h3>

<p>Existen N personas que deben ser chequeadas por un detector de metales antes de poder ingresar al avión.</p>
<p><strong>a)</strong> Analice el problema y defina qué procesos, recursos y semáforos serán necesarios/convenientes, además de las posibles sincronizaciones requeridas para resolver el problema.</p>
<p>N personas (), Detector de metales (recurso), mutex (semaforos), exclusion mutua (sincronizacion)</p>
<p><strong>b)</strong> Implemente una solución que modele el acceso de las personas a un detector (es decir, si el detector está libre la persona lo puede utilizar; en caso contrario, debe esperar).</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem mutex <span class="token operator">=</span> <span class="token number">1</span>
Process Persona<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">1.</span><span class="token punctuation">.</span>N<span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token comment">//Llega al detector</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token comment">//Se detecta</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token comment">//Sube al avión</span>
<span class="token punctuation">}</span>
</code></pre><p><strong>c)</strong> Modifique su solución para el caso que haya tres detectores.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem mutex <span class="token operator">=</span> <span class="token number">3</span>
Process Persona<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">1.</span><span class="token punctuation">.</span>N<span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token comment">//Llega al detector</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token comment">//Se detecta</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token comment">//Sube al avión</span>
<span class="token punctuation">}</span>
</code></pre><img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<h3 class="crossnote-header" id="ejercicio-2-falta">Ejercicio 2 (Falta)</h3>

<p>Un sistema de control cuenta con 4 procesos que realizan chequeos en forma colaborativa. Para ello, reciben el historial de fallos del día anterior (por simplicidad, de tamaño N). De cada fallo, se conoce su número de identificación (ID) y su nivel de gravedad (0=bajo, 1=intermedio, 2=alto, 3=crítico). Resuelva considerando las siguientes situaciones:</p>
<p><strong>a)</strong> Se debe imprimir en pantalla los ID de todos los errores críticos (no importa el orden).</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code></code></pre><p><strong>b)</strong> Se debe calcular la cantidad de fallos por nivel de gravedad, debiendo quedar los resultados en un vector global.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code></code></pre><p><strong>c)</strong> Ídem b) pero cada proceso debe ocuparse de contar los fallos de un nivel de gravedad determinado.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code></code></pre><img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<h3 class="crossnote-header" id="-ejercicio-3">✅ Ejercicio 3</h3>

<p>Un sistema operativo mantiene 5 instancias de un recurso almacenadas en una cola.</p>
<p>Además, existen P procesos que necesitan usar una instancia del recurso. Para eso, deben sacar la instancia de la cola antes de usarla. Una vez usada, la instancia debe ser encolada nuevamente</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> espera <span class="token operator">=</span> <span class="token number">5</span>
cola T recursos<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>
Process Proceso<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">1.</span><span class="token punctuation">.</span>P<span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>espera<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                <span class="token function">pop</span><span class="token punctuation">(</span>recursos<span class="token punctuation">,</span>rec<span class="token punctuation">)</span>
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                <span class="token function">usar</span><span class="token punctuation">(</span>rec<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                <span class="token function">push</span><span class="token punctuation">(</span>recursos<span class="token punctuation">,</span>rec<span class="token punctuation">)</span>
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>espera<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<h3 class="crossnote-header" id="-ejercicio-4">✅ Ejercicio 4</h3>

<p>Suponga que existe una BD que puede ser accedida por 6 usuarios como máximo al mismo tiempo. Además, los usuarios se clasifican como usuarios de prioridad alta y usuarios de prioridad baja. Por último, la BD tiene la siguiente restricción:</p>
<ul>
<li>no puede haber más de 4 usuarios con prioridad alta al mismo tiempo usando la BD.</li>
<li>no puede haber más de 5 usuarios con prioridad baja al mismo tiempo usando la BD.</li>
</ul>
<blockquote>
<p>Indique si la solución presentada es la más adecuada. Justifique la respuesta.</p>
</blockquote>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-Var">Var</span>
    sem<span class="token punctuation">:</span> semaphoro <span class="token operator">:=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    alta<span class="token punctuation">:</span> semaphoro <span class="token operator">:=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    baja<span class="token punctuation">:</span> semaphoro <span class="token operator">:=</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre><table>
<tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Usuario<span class="token operator">-</span>Alta <span class="token punctuation">[</span>I<span class="token operator">:</span><span class="token number">1.</span><span class="token punctuation">.</span>L<span class="token punctuation">]</span><span class="token operator">::</span><span class="token punctuation">{</span>
    <span class="token function">P</span> <span class="token punctuation">(</span>sem<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">P</span> <span class="token punctuation">(</span>alta<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//usa la BD</span>
    <span class="token function">V</span><span class="token punctuation">(</span>sem<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">V</span><span class="token punctuation">(</span>alta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Usuario<span class="token operator">-</span>Baja <span class="token punctuation">[</span>I<span class="token operator">:</span><span class="token number">1.</span><span class="token punctuation">.</span>K<span class="token punctuation">]</span><span class="token operator">::</span><span class="token punctuation">{</span> 
    <span class="token function">P</span> <span class="token punctuation">(</span>sem<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">P</span> <span class="token punctuation">(</span>baja<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//usa la BD</span>
    <span class="token function">V</span><span class="token punctuation">(</span>sem<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">V</span><span class="token punctuation">(</span>baja<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></td></tr>
</tbody></table>
<p>No, no es la mas adecuada. P(alta) y P(baja) deberian ir antes de P(sem), ya que evita demora innecesaria al preguntar si hay primero espacio para gente de alta/baja antes de reservar el espacio para entrar.</p>
<img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<h3 class="crossnote-header" id="-ejercicio-5">✅ Ejercicio 5</h3>

<p>En una empresa de logística de paquetes existe una sala de contenedores donde se preparan las entregas. Cada contenedor puede almacenar un paquete y la sala cuenta con capacidad para N contenedores. Resuelva considerando las siguientes situaciones:</p>
<hr>
<p><strong>a)</strong> La empresa cuenta con 2 empleados: un empleado Preparador que se ocupa de preparar los paquetes y dejarlos en los contenedores; un empelado Entregador que se ocupa de tomar los paquetes de los contenedores y realizar la entregas. Tanto el Preparador como el Entregador trabajan de a un paquete por vez.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem cantidad<span class="token operator">=</span> N
sem hayPaquetes<span class="token operator">=</span> <span class="token number">0</span>
sem mutex<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
Paquete llenos<span class="token punctuation">[</span>N<span class="token punctuation">]</span>
<span class="token keyword keyword-int">int</span> front<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>rear <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Preparador<span class="token punctuation">{</span>
    Paquete paquete
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//prepara paquete</span>
        <span class="token function">P</span><span class="token punctuation">(</span>cantidad<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                buffer<span class="token punctuation">[</span>rear<span class="token punctuation">]</span><span class="token operator">=</span> paquete
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        rear<span class="token operator">=</span> <span class="token punctuation">(</span>rear <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> mod N<span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>hayPaquetes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Entregador<span class="token punctuation">{</span>
    Paquete paquete
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>hayPaquetes<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                paquete<span class="token operator">=</span> buffer<span class="token punctuation">[</span>front<span class="token punctuation">]</span>
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
            front<span class="token operator">=</span> <span class="token punctuation">(</span>front<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> mod N
        <span class="token function">V</span><span class="token punctuation">(</span>cantidad<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td></tr></tbody></table>
<hr>
<p><strong>b)</strong> Modifique la solución a) para el caso en que haya P empleados Preparadores.</p>
<table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Preparador<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>P<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    Paquete paquete
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//prepara paquete</span>
        <span class="token function">P</span><span class="token punctuation">(</span>cantidad<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                buffer<span class="token punctuation">[</span>rear<span class="token punctuation">]</span><span class="token operator">=</span> paquete
                rear<span class="token operator">=</span> <span class="token punctuation">(</span>rear <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> mod N<span class="token punctuation">;</span>
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>hayPaquetes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Entregador<span class="token punctuation">{</span>
    Paquete paquete
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>hayPaquetes<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                paquete<span class="token operator">=</span> buffer<span class="token punctuation">[</span>front<span class="token punctuation">]</span>
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
            front<span class="token operator">=</span> <span class="token punctuation">(</span>front<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> mod N
        <span class="token function">V</span><span class="token punctuation">(</span>cantidad<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td></tr></tbody></table>
<hr>
<p><strong>c)</strong> Modifique la solución a) para el caso en que haya E empleados Entregadores.</p>
<table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Preparador<span class="token punctuation">{</span>
    Paquete paquete
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        prepara paquete
        <span class="token function">P</span><span class="token punctuation">(</span>cantidad<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                buffer<span class="token punctuation">[</span>rear<span class="token punctuation">]</span><span class="token operator">=</span> paquete
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
            rear<span class="token operator">=</span> <span class="token punctuation">(</span>rear <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> mod N<span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>hayPaquetes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Entregador<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>E<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    Paquete paquete
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>hayPaquetes<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                paquete<span class="token operator">=</span> buffer<span class="token punctuation">[</span>front<span class="token punctuation">]</span>
                front<span class="token operator">=</span> <span class="token punctuation">(</span>front<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> mod N
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>cantidad<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td></tr></tbody></table>
<hr>
<p><strong>d)</strong> Modifique la solución a) para el caso en que haya P empleados Preparadores y E empleadores Entregadores.</p>
<table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Preparador<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>P<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    Paquete paquete
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        prepara paquete
        <span class="token function">P</span><span class="token punctuation">(</span>cantidad<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                buffer<span class="token punctuation">[</span>rear<span class="token punctuation">]</span><span class="token operator">=</span> paquete
                rear<span class="token operator">=</span> <span class="token punctuation">(</span>rear <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> mod N<span class="token punctuation">;</span>
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>hayPaquetes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Entregador<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>E<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    Paquete paquete
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>hayPaquetes<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
                paquete<span class="token operator">=</span> buffer<span class="token punctuation">[</span>front<span class="token punctuation">]</span>
                front<span class="token operator">=</span> <span class="token punctuation">(</span>front<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> mod N
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>cantidad<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td></tr></tbody></table>
<img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20999px">
<h3 class="crossnote-header" id="-ejercicio-6">✅ Ejercicio 6</h3>

<p>Existen N personas que deben imprimir un trabajo cada una. Resolver cada ítem usando<br>
semáforos:</p>
<p><strong>a)</strong> Implemente una solución suponiendo que existe una única impresora compartida por todas las personas, y las mismas la deben usar de a una persona a la vez, sin importar el orden. Existe una función Imprimir(documento) llamada por la persona que simula el uso de la impresora. Sólo se deben usar los procesos que representan a las Personas.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem mutex<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
Process Persona<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>P<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token function">Imprimir</span><span class="token punctuation">(</span>documento<span class="token punctuation">)</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><p><strong>b)</strong> Modifique la solución de (a) para el caso en que se deba respetar el orden de llegada.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem mutex<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
sem T espera<span class="token punctuation">[</span>P<span class="token punctuation">]</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>P<span class="token punctuation">]</span> <span class="token number">0</span><span class="token punctuation">)</span>
cola c<span class="token punctuation">;</span>
boolean libre<span class="token operator">=</span> true<span class="token punctuation">;</span>

Process Persona<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>P<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-int">int</span> aux<span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>libre<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        libre<span class="token operator">=</span> false<span class="token punctuation">;</span> 
        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-else">else</span><span class="token punctuation">{</span>
        <span class="token function">push</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>id<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>espera<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">Imprimir</span><span class="token punctuation">(</span>documento<span class="token punctuation">)</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span><span class="token function">empty</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span> 
        libre<span class="token operator">=</span> true
    <span class="token keyword keyword-else">else</span> <span class="token punctuation">{</span> 
        <span class="token function">pop</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>aux<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token function">V</span><span class="token punctuation">(</span>espera<span class="token punctuation">[</span>aux<span class="token punctuation">]</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><p><strong>c)</strong> Modifique la solución de (a) para el caso en que se deba respetar estrictamente el orden dado por el identificador del proceso (la persona X no puede usar la impresora hasta que no haya terminado de usarla la persona X-1).</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem mutex<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
sem T espera<span class="token punctuation">[</span>P<span class="token punctuation">]</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>P<span class="token punctuation">]</span> <span class="token number">0</span><span class="token punctuation">)</span>
boolean libre<span class="token operator">=</span> true<span class="token punctuation">;</span>

Process Persona<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>P<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-if">if</span> id <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>espera<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">imprimir</span><span class="token punctuation">(</span>documento<span class="token punctuation">)</span>
    <span class="token keyword keyword-if">if</span> id <span class="token operator">!=</span> P<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">{</span>
        <span class="token comment">// el 0 no entra de vuelta igual Preguntar</span>
        <span class="token function">V</span><span class="token punctuation">(</span>espera<span class="token punctuation">[</span>id<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p><strong>d)</strong> Modifique la solución de (b) para el caso en que además hay un proceso Coordinador que le indica a cada persona que es su turno de usar la impresora.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem mutex<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
sem T espera<span class="token punctuation">[</span>P<span class="token punctuation">]</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>P<span class="token punctuation">]</span> <span class="token number">0</span><span class="token punctuation">)</span>
sem termine <span class="token operator">=</span> <span class="token number">1</span>
boolean libre<span class="token operator">=</span> true<span class="token punctuation">;</span>
</code></pre><table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Persona<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>P<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-int">int</span> aux<span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token function">push</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>id<span class="token punctuation">)</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token function">V</span><span class="token punctuation">(</span>coord<span class="token punctuation">)</span>
    <span class="token function">P</span><span class="token punctuation">(</span>espera<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token function">Imprimir</span><span class="token punctuation">(</span>documento<span class="token punctuation">)</span>
    <span class="token function">V</span><span class="token punctuation">(</span>termine<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code><span class="token keyword keyword-int">int</span> aux<span class="token punctuation">;</span>
Process Coordinador<span class="token punctuation">{</span>
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>coord<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">pop</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>aux<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">P</span><span class="token punctuation">(</span>termine<span class="token punctuation">)</span> <span class="token comment">//Esta y la de abajo, podrian invertise</span>
        <span class="token function">V</span><span class="token punctuation">(</span>espera<span class="token punctuation">[</span>aux<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Si el semaforo estuviera en 0</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td> </tr></tbody></table>
<p><strong>e)</strong> Modificar la solución (d) para el caso en que sean 5 impresoras. El coordinador le indica a la persona cuando puede usar una impresora, y cual debe usar.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem coord<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> mutex<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> espera<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>P<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> termine <span class="token operator">=</span> <span class="token number">5</span>
cola T c<span class="token punctuation">[</span>P<span class="token punctuation">]</span><span class="token punctuation">;</span> cola Impresoras impresoras<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> sem impMutex<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Persona<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>P<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    Impresora imp<span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> aux<span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token function">push</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>id<span class="token punctuation">)</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    
    <span class="token function">V</span><span class="token punctuation">(</span>coord<span class="token punctuation">)</span>
    <span class="token function">P</span><span class="token punctuation">(</span>espera<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">//Imprimir en impresora</span>
    asignado<span class="token punctuation">[</span>aux<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>impMutex<span class="token punctuation">)</span>
        <span class="token function">push</span><span class="token punctuation">(</span>impresoras<span class="token punctuation">,</span>imp<span class="token punctuation">)</span>
    <span class="token function">V</span><span class="token punctuation">(</span>impMutex<span class="token punctuation">)</span>
    <span class="token function">V</span><span class="token punctuation">(</span>imp<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code><span class="token keyword keyword-int">int</span> aux<span class="token punctuation">;</span>
imp<span class="token punctuation">,</span>sem <span class="token operator">=</span> <span class="token number">5</span>
libres <span class="token operator">:</span> cola
Process Coordinador<span class="token punctuation">{</span>
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>coord<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">pop</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>aux<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">P</span><span class="token punctuation">(</span>imp<span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>impMutex<span class="token punctuation">)</span>
            impLibre <span class="token operator">=</span> <span class="token function">pop</span><span class="token punctuation">(</span>libres<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>impMutex<span class="token punctuation">)</span>
        asignado<span class="token punctuation">[</span>aux<span class="token punctuation">]</span><span class="token operator">=</span>impLibre
        <span class="token function">V</span><span class="token punctuation">(</span>espera<span class="token punctuation">[</span>aux<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td> </tr></tbody></table>
<img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif">
<h3 class="crossnote-header" id="-ejercicio-7-corregido-a-duras-penas">✅ Ejercicio 7 (Corregido a duras penas)</h3>

<p>Suponga que se tiene un curso con 50 alumnos. Cada alumno debe realizar una tarea y existen 10 enunciados posibles. Una vez que todos los alumnos eligieron su tarea, comienzan a realizarla. Cada vez que un alumno termina su tarea, le avisa al profesor y se queda esperando el puntaje del grupo, el cual está dado por todos aquellos que comparten el mismo enunciado. Cuando un grupo terminó, el profesor les otorga un puntaje que representa el orden en que se terminó esa tarea de las 10 posibles.</p>
<blockquote>
<p>Nota: Para elegir la tarea suponga que existe una función elegir que le asigna una tarea a un alumno (esta función asignará 10 tareas diferentes entre 50 alumnos, es decir, que 5 alumnos tendrán la tarea 1, otros 5 la tarea 2 y así sucesivamente para las 10 tareas).</p>
</blockquote>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code><span class="token keyword keyword-int">int</span> eligiocount <span class="token operator">=</span> <span class="token number">50</span>
A<span class="token operator">=</span> <span class="token number">50</span>
sem eligio <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> barrera<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> terminoGrupo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> alus <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
sem grupoMutex<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
sem corrigio<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
sem barreraGrupo<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
sem mutexColas <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword keyword-int">int</span> cantGrupo<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span>
cola colaGrupos<span class="token punctuation">,</span>
</code></pre><pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Alumno<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>A<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-int">int</span> idGrupo <span class="token operator">=</span> <span class="token function">elegir</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        eligiocount <span class="token operator">=</span> eligiocount<span class="token operator">-</span><span class="token number">1</span>
        <span class="token keyword keyword-if">if</span> eligiocount <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
            <span class="token function">V</span><span class="token punctuation">(</span>barrera<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token function">P</span><span class="token punctuation">(</span>alus<span class="token punctuation">)</span>
    <span class="token comment">//hacer tarea</span>
    <span class="token function">P</span><span class="token punctuation">(</span>grupoMutex<span class="token punctuation">[</span>idGrupo<span class="token punctuation">]</span><span class="token punctuation">)</span>
        cantGrupo<span class="token punctuation">[</span>idGrupo<span class="token punctuation">]</span><span class="token operator">=</span> cantGrupo<span class="token punctuation">[</span>idGrupo<span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>cantGrupo<span class="token punctuation">[</span>idGrupo<span class="token punctuation">]</span><span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">V</span><span class="token punctuation">(</span>grupoMutex<span class="token punctuation">[</span>idGrupo<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutexColas<span class="token punctuation">)</span>
            <span class="token function">push</span><span class="token punctuation">(</span>colaGrupos<span class="token punctuation">,</span>idGrupo<span class="token punctuation">)</span>
            <span class="token function">V</span><span class="token punctuation">(</span>mutexColas<span class="token punctuation">)</span>
            <span class="token function">V</span><span class="token punctuation">(</span>terminoGrupo<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword keyword-else">else</span><span class="token punctuation">{</span>
            <span class="token function">V</span><span class="token punctuation">(</span>grupoMutex<span class="token punctuation">[</span>idGrupo<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">P</span><span class="token punctuation">(</span>corrigio<span class="token punctuation">[</span>idGrupo<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Profesor<span class="token punctuation">{</span>
    <span class="token function">P</span><span class="token punctuation">(</span>barrera<span class="token punctuation">)</span>
    <span class="token keyword keyword-int">int</span> orden<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-for">for</span> i<span class="token operator">=</span> <span class="token number">1</span> to A <span class="token keyword keyword-do">do</span><span class="token punctuation">{</span>
        <span class="token function">V</span><span class="token punctuation">(</span>alus<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-for">for</span> j<span class="token operator">=</span> <span class="token number">1</span> to <span class="token number">10</span> <span class="token keyword keyword-do">do</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>terminoGrupo<span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>mutexColas<span class="token punctuation">)</span>
            <span class="token function">pop</span><span class="token punctuation">(</span>colaGrupos<span class="token punctuation">,</span>idGrupo<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>mutexColas<span class="token punctuation">)</span>

        nota<span class="token punctuation">[</span>idGrupo<span class="token punctuation">]</span><span class="token operator">=</span> orden<span class="token punctuation">;</span>
        orden<span class="token operator">++</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-for">for</span> j<span class="token operator">=</span> <span class="token number">1</span> to <span class="token number">5</span> <span class="token keyword keyword-do">do</span> <span class="token punctuation">{</span>
            <span class="token function">V</span><span class="token punctuation">(</span>corrigio<span class="token punctuation">[</span>idGrupo<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<h3 class="crossnote-header" id="ejercicio-8">Ejercicio 8</h3>

<p>Una fábrica de piezas metálicas debe producir T piezas por día. Para eso, cuenta con E empleados que se ocupan de producir las piezas de a una por vez (se asume T&gt;E). La fábrica empieza a producir una vez que todos los empleados llegaron. Mientras haya piezas por fabricar, los empleados tomarán una y la realizarán. Cada empleado puede tardar distinto tiempo en fabricar una pieza. Al finalizar el día, se le da un premio al empleado que más piezas fabricó.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code><span class="token keyword keyword-int">int</span> llegaron <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> piezas<span class="token punctuation">[</span>E<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>E<span class="token punctuation">]</span><span class="token number">0</span><span class="token punctuation">)</span>
sem esperando <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> mutex <span class="token operator">=</span> <span class="token number">1</span>
Process Empleado<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>E<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token comment">// llega a la fabrica</span>
    bool ultimo<span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        llegaron<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>llegaron<span class="token operator">==</span>E<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword keyword-for">for</span> i<span class="token operator">=</span> <span class="token number">1</span> to E <span class="token keyword keyword-do">do</span> <span class="token punctuation">{</span> 
                <span class="token function">V</span><span class="token punctuation">(</span>esperando<span class="token punctuation">)</span> 
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token function">P</span><span class="token punctuation">(</span>esperando<span class="token punctuation">)</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>T<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            T<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>T<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ultimo<span class="token operator">==</span>true
            <span class="token punctuation">}</span>
            <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
            <span class="token function">fabricar_pieza</span><span class="token punctuation">(</span>materiales<span class="token punctuation">,</span>mano_de_obra<span class="token punctuation">)</span>
            piezas<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>ultimo<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//*</span>
        <span class="token function">dar</span><span class="token punctuation">(</span>premio<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>piezas<span class="token punctuation">)</span><span class="token punctuation">.</span>pos<span class="token punctuation">)</span> <span class="token operator">--</span> max devuelve pos y cantidad
        <span class="token keyword keyword-for">for</span> i <span class="token operator">=</span> <span class="token number">0</span> to E<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">{</span> <span class="token operator">--</span> Sino el premiado puede ya haber finalizado
        <span class="token function">V</span><span class="token punctuation">(</span>salida<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">P</span><span class="token punctuation">(</span>salida<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><h4 class="crossnote-header" id="comentario-del-profesor">Comentario del profesor</h4>

<blockquote>
<p>No garantizo que es el ultimo. Ya que puedo estar en T = 0 y otro proceso puede entrar y hacer T = 0 y no ser el ultimo.</p>
</blockquote>
<blockquote>
<p><code>*</code> Puede estar calculando el maximo antes que algun proceso haya actualizado piezas[]</p>
</blockquote>
<p>Tampoco hace falta hacer un for para calcular el maximo, tranquilamente podemos hacer</p>
<p>ganador = calcularMaximo();</p>
<img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<h3 class="crossnote-header" id="ejercicio-9">Ejercicio 9</h3>

<p>Resolver el funcionamiento en una fábrica de ventanas con 7 empleados (4 carpinteros, 1 vidriero y 2 armadores) que trabajan de la siguiente manera:</p>
<ul>
<li>Los carpinteros continuamente hacen marcos (cada marco es armando por un único carpintero) y los deja en un depósito con capacidad de almacenar 30 marcos.</li>
<li>El vidriero continuamente hace vidrios y los deja en otro depósito con capacidad para 50 vidrios.</li>
<li>Los armadores continuamente toman un marco y un vidrio (en ese orden) de los depósitos correspondientes y arman la ventana (cada ventana es armada por un único armador).</li>
</ul>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem marcos <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span> vidrios <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span>
hayMarcos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> hayVidrios <span class="token operator">=</span> <span class="token number">0</span>
depoMarco <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> depoVidrio <span class="token operator">=</span> <span class="token number">1</span>
cola<span class="token operator">&lt;</span>Marco<span class="token operator">&gt;</span> colaMarcos<span class="token punctuation">;</span> cola<span class="token operator">&lt;</span>Vidrio<span class="token operator">&gt;</span> colaVidrios<span class="token punctuation">;</span>
</code></pre><table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Carpintero<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token number">.3</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hace marco <span class="token comment">// preguntar adentro o afuera</span>
        <span class="token function">P</span><span class="token punctuation">(</span>marcos<span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>depoMarco<span class="token punctuation">)</span>
            <span class="token function">push</span><span class="token punctuation">(</span>colaMarcos<span class="token punctuation">,</span>marco<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>depoMarco<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>hayMarcos<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Vidriero<span class="token punctuation">{</span>
    <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        hace vidrio <span class="token comment">// preguntar adentro o afuera</span>
        <span class="token function">P</span><span class="token punctuation">(</span>vidrios<span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>depoVidrio<span class="token punctuation">)</span>
        <span class="token function">push</span><span class="token punctuation">(</span>colaVidrios<span class="token punctuation">,</span>vidrio<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>depoVidrio<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>hayVidrios<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td></tr></tbody></table>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Armador<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token number">.1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>hayMarcos<span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>depoMarco<span class="token punctuation">)</span>
            <span class="token function">pop</span><span class="token punctuation">(</span>colaMarcos<span class="token punctuation">,</span>marco<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>depoMarco<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>marcos<span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>hayVidrios<span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>depoVidrio<span class="token punctuation">)</span>
            <span class="token function">pop</span><span class="token punctuation">(</span>colaVidrios<span class="token punctuation">,</span>vidrio<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>depoVidrio<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>vidrios<span class="token punctuation">)</span>
        <span class="token comment">//arma ventana</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<h3 class="crossnote-header" id="ejercicio-10">Ejercicio 10</h3>

<p>A una cerealera van T camiones a descargarse trigo y M camiones a descargar maíz. Sólo hay lugar para que 7 camiones a la vez descarguen, pero no pueden ser más de 5 del mismo tipo de cereal. Nota: no usar un proceso extra que actué como coordinador, resolverlo<br>
entre los camiones.</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>sem trigo<span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>maiz<span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>lugares<span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
</code></pre><table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>process CamionTrigo <span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>T<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>trigo<span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>lugares<span class="token punctuation">)</span>
        <span class="token function">descargar</span><span class="token punctuation">(</span>carga<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>trigo<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>lugares<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>process CamionMaiz <span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>M<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>true<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>maiz<span class="token punctuation">)</span>
            <span class="token function">P</span><span class="token punctuation">(</span>lugares<span class="token punctuation">)</span>
            <span class="token function">descargar</span><span class="token punctuation">(</span>carga<span class="token punctuation">)</span>
            <span class="token function">V</span><span class="token punctuation">(</span>maiz<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>lugares<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></td></tr></tbody></table>
<img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<h3 class="crossnote-header" id="ejercicio-11">Ejercicio 11</h3>

<p>En un vacunatorio hay un empleado de salud para vacunar a 50 personas. El empleado de salud atiende a las personas de acuerdo con el orden de llegada y de a 5 personas a la vez. Es decir, que cuando está libre debe esperar a que haya al menos 5 personas esperando, luego vacuna a las 5 primeras personas, y al terminar las deja ir para esperar por otras 5. Cuando ha atendido a las 50 personas el empleado de salud se retira.</p>
<blockquote>
<p>Nota: todos los procesos deben terminar su ejecución; asegurarse de no realizar Busy Waiting; suponga que el empleado tienen una función VacunarPersona() que simula que el empleado está vacunando a UNA persona.</p>
</blockquote>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code> sem haycinco <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword keyword-int">int</span> cant <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> P <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> idGrupo<span class="token operator">=</span> <span class="token number">0</span>
cola grupo<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>

</code></pre><table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Persona<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>P<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        cant<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">// protege esto</span>
        <span class="token function">push</span><span class="token punctuation">(</span>grupo<span class="token punctuation">[</span>idGrupo<span class="token punctuation">]</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span>
        <span class="token keyword keyword-if">if</span><span class="token punctuation">(</span>cant<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            idGrupo<span class="token operator">++</span><span class="token punctuation">;</span>
            cant<span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
            <span class="token function">V</span><span class="token punctuation">(</span>haycinco<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token function">P</span><span class="token punctuation">(</span>vacuno<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">//se va</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code><span class="token keyword keyword-int">int</span> listo<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword keyword-int">int</span> i<span class="token punctuation">,</span>atendidos<span class="token punctuation">;</span>
<span class="token keyword keyword-int">int</span> idGrupoRevisado<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

Process Empleado<span class="token punctuation">{</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>atendidos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> atendidos <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> atendidos<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">P</span><span class="token punctuation">(</span>haycinco<span class="token punctuation">)</span>
        <span class="token keyword keyword-for">for</span> i<span class="token operator">:</span><span class="token operator">=</span><span class="token number">0</span> to <span class="token number">4</span> <span class="token punctuation">{</span>
            listo<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span> <span class="token function">pop</span><span class="token punctuation">(</span>grupo<span class="token punctuation">[</span>idGrupoRevisado<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token function">Vacunar</span><span class="token punctuation">(</span>persona<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-for">for</span> i<span class="token operator">:</span><span class="token operator">=</span><span class="token number">0</span> to <span class="token number">4</span><span class="token punctuation">{</span>
            <span class="token function">V</span><span class="token punctuation">(</span>vacuno<span class="token punctuation">[</span>listo<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        idGrupoRevisado<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    se va
<span class="token punctuation">}</span>
</code></pre></td></tr></tbody></table>
<img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">
<h3 class="crossnote-header" id="ejercicio-12">Ejercicio 12</h3>

<p>Simular la atención en una Terminal de Micros que posee 3 puestos para hisopar a 150 pasajeros. En cada puesto hay una Enfermera que atiende a los pasajeros de acuerdo con el orden de llegada al mismo. Cuando llega un pasajero se dirige al puesto que tenga menos gente esperando. Espera a que la enfermera correspondiente lo llame para hisoparlo, y luego se retira. Nota: sólo deben usar procesos Pasajero y Enfermera.<br>
Además, suponer que existe una función Hisopar() que simula la atención del pasajero por<br>
parte de la enfermera correspondiente</p>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code><span class="token keyword keyword-int">int</span> P <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">,</span> hisopados <span class="token operator">=</span> <span class="token number">0</span>
cola<span class="token operator">&lt;</span>Persona<span class="token operator">&gt;</span> puestos<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword keyword-int">int</span> cant_puestos<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token number">0</span><span class="token punctuation">)</span>
sem espera<span class="token punctuation">[</span>P<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>P<span class="token punctuation">]</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hayPaciente<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre><table><tbody><tr><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Pasajero<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token punctuation">.</span>P<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword keyword-int">int</span> min<span class="token punctuation">,</span> min_cant <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
        <span class="token keyword keyword-for">for</span> i<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">{</span>
            <span class="token keyword keyword-if">if</span> cant_puestos<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&lt;</span>min_cant<span class="token punctuation">{</span>
                min_cant<span class="token operator">=</span> cant_puestos<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
                min<span class="token operator">=</span> i
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">P</span><span class="token punctuation">(</span>mutexCola<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token function">push</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> puestos<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>mutexCola<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">)</span>
        cant_puestos<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token operator">++</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
    <span class="token function">V</span><span class="token punctuation">(</span>haypaciente<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">P</span><span class="token punctuation">(</span>espera<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">//se va</span>
<span class="token punctuation">}</span>
</code></pre></td><td>
<pre data-role="codeBlock" data-info="c" class="language-c c"><code>Process Enfermera<span class="token punctuation">[</span>id<span class="token operator">:</span><span class="token number">0.</span><span class="token number">.2</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token function">P</span><span class="token punctuation">(</span>hayPaciente<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">P</span><span class="token punctuation">(</span>mutexHisopados<span class="token punctuation">)</span>
    <span class="token keyword keyword-while">while</span><span class="token punctuation">(</span>hisopados <span class="token operator">&lt;</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        hisopados<span class="token operator">++</span>
        <span class="token function">V</span><span class="token punctuation">(</span>mutexHisopados<span class="token punctuation">)</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>hisopados<span class="token operator">==</span><span class="token number">150</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-for">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span> <span class="token number">0</span> to <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">V</span><span class="token punctuation">(</span>hayPaciente<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">P</span><span class="token punctuation">(</span>mutexCola<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token function">pop</span><span class="token punctuation">(</span>idpaciente<span class="token punctuation">,</span>puestos<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>mutexCola<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token function">Hisopar</span><span class="token punctuation">(</span>idpaciente<span class="token punctuation">)</span>
        <span class="token function">V</span><span class="token punctuation">(</span>espera<span class="token punctuation">[</span>idpaciente<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>hayPaciente<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token function">P</span><span class="token punctuation">(</span>mutexHisopados<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">V</span><span class="token punctuation">(</span>mutexHisopados<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></td></tr></tbody></table>
<img src="https://i.gifer.com/origin/8c/8cd3f1898255c045143e1da97fbabf10_w200.gif" height="20" width="100%">

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>